# Veilwarden Configuration for Local Development
# This configuration disables Kubernetes authentication and uses static secrets

# Disable Kubernetes authentication for local dev
kubernetes:
  enabled: false

# Simple config-based policy for development
policy:
  enabled: true
  default_action: allow  # Allow all requests for local testing

# Static secrets for local development
# WARNING: Never commit real secrets to version control!
secrets:
  - id: GITHUB_TOKEN
    value: ghp_your_token_here  # Replace with your GitHub personal access token
  - id: STRIPE_SECRET_KEY
    value: sk_test_your_key_here  # Replace with your Stripe test secret key
  - id: INTERNAL_API_KEY
    value: dev_api_key_12345

# Example routes configuration
routes:
  # GitHub API access
  - upstream_host: api.github.com
    upstream_scheme: https
    secret_id: GITHUB_TOKEN
    inject_header: Authorization
    header_value_template: "token {{secret}}"

  # Stripe API access
  - upstream_host: api.stripe.com
    upstream_scheme: https
    secret_id: STRIPE_SECRET_KEY
    inject_header: Authorization
    header_value_template: "Bearer {{secret}}"

  # Local development API
  - upstream_host: localhost:8080
    upstream_scheme: http
    secret_id: INTERNAL_API_KEY
    inject_header: X-API-Key
    header_value_template: "{{secret}}"

# User identity for development (used when not using K8s auth)
user:
  id: "dev-user"
  email: "developer@example.com"
  org: "development"

# Session secret for development
# Generate with: openssl rand -hex 32
session_secret: "dev-session-secret-change-in-production"

# Observability configuration
observability:
  metrics:
    enabled: true
    port: 9090
    path: /metrics
  logging:
    level: debug  # Verbose logging for development
    format: text  # Human-readable logs for development
