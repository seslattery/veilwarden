# Veilwarden config for Claude Code
#
# Usage:
#   cd examples/claude-code
#   export ANTHROPIC_API_KEY=sk-ant-...
#   veil exec -- claude
#
# Or from anywhere:
#   veil exec --config path/to/examples/claude-code/config.yaml -- claude

routes:
  - host: api.anthropic.com
    secret_id: ANTHROPIC_API_KEY
    header_name: x-api-key
    header_value_template: "{{secret}}"

# Uncomment to use Doppler instead of env vars:
# doppler:
#   project: my-project
#   config: dev

policy:
  engine: opa
  policy_path: ./policies
  decision_path: veilwarden/authz/allow

sandbox:
  enabled: true
  backend: auto
  working_dir: .
  allowed_write_paths:
    - .
    - /tmp
  denied_read_paths:
    # Cloud & API credentials
    - ~/.ssh
    - ~/.aws
    - ~/.config/gcloud
    - ~/.azure
    - ~/.kube
    - ~/.docker
    # Secret managers
    - ~/.doppler
    - ~/.gnupg
    - ~/.password-store
    - ~/.vault-token
    # Tool configs with embedded secrets
    - ~/.anthropic
    - ~/.config/claude
    - ~/.openai
    - ~/.netrc
    - ~/.git-credentials
    - ~/.npmrc
    - ~/.pypirc
    # History files (may contain secrets)
    - ~/.bash_history
    - ~/.zsh_history
    - ~/.python_history
