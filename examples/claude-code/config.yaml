# Veilwarden config for Claude Code
#
# Usage (run from this directory):
#   cd examples/claude-code
#   export ANTHROPIC_API_KEY=sk-ant-...
#   veil exec -- claude
#
# Note: policy_path and working_dir are relative to where you run the command,
# so you must cd into this directory first.

#routes:
#  - host: api.anthropic.com
#    secret_id: ANTHROPIC_API_KEY
#    header_name: x-api-key
#    header_value_template: "{{secret}}"

# Uncomment to use Doppler instead of env vars:
doppler:
  project: veilwarden
  config: dev

policy:
  engine: opa
  policy_path: ./policies
  decision_path: veilwarden/authz/allow

sandbox:
  enabled: true
  backend: auto
  working_dir: .
  enable_pty: true  # Required for interactive CLIs like Claude Code
  allowed_write_paths:
    - .
    - /tmp
    - ~/.claude.json
    - ~/.claude
  denied_read_paths:
    # Cloud & API credentials
    - ~/.ssh
    - ~/.aws
    - ~/.config/gcloud
    - ~/.azure
    - ~/.kube
    - ~/.docker
    # Secret managers
    - ~/.doppler
    - ~/.gnupg
    - ~/.password-store
    - ~/.vault-token
    # Tool configs with embedded secrets
    - ~/.anthropic
    - ~/.config/claude
    - ~/.openai
    - ~/.netrc
    - ~/.git-credentials
    - ~/.npmrc
    - ~/.pypirc
    # History files (may contain secrets)
    - ~/.bash_history
    - ~/.zsh_history
    - ~/.python_history
